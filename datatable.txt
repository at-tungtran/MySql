



CREATE TABLE `baitap`.`user` (
  `id` INT(11) NOT NULL,
  `full_name` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `rank` TINYINT(4) NOT NULL,
  `is_active` TINYINT(1) NULL,
  `create_time` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));



CREATE TABLE `baitap`.`follow` (
  `id` INT(11) NOT NULL,
  `form_user_id` INT(11) NOT NULL,
  `to_user_id` INT(11) NOT NULL,
  `create_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

CREATE TABLE `baitap`.`comment` (
  `id` INT(11) NOT NULL,
  `target_table` VARCHAR(20) NOT NULL,
  `target_id` INT(11) NOT NULL,
  `user_id` INT(11) NOT NULL,
  `comment` TEXT NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

CREATE TABLE `baitap`.`blog` (
  `id` INT(11) NOT NULL,
  `category_id` INT(11) NOT NULL,
  `user_id` INT(11) NOT NULL,
  `title` VARCHAR(255) NOT NULL,
  `view` INT(11) NOT NULL,
  `is_active` TINYINT(1) NULL,
  `content` TEXT NULL,
  `blogcol` VARCHAR(45) NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `created_at_copy1` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

CREATE TABLE `baitap`.`category` (
  `id` INT(11) NOT NULL,
  `title` VARCHAR(255) NOT NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `baitap`.`news` (
  `id` INT(11) NOT NULL,
  `catelogy_id` INT(11) NOT NULL,
  `title` VARCHAR(255) NOT NULL,
  `view` INT(11) NOT NULL,
  `is_active` TINYINT(1) NULL,
  `content` TEXT NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));


ALTER TABLE `baitap`.`follow` 
ADD INDEX `fk_follow_1_idx` (`form_user_id` ASC);
;
ALTER TABLE `baitap`.`follow` 
ADD CONSTRAINT `fk_follow_1`
  FOREIGN KEY (`form_user_id`)
  REFERENCES `baitap`.`user` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `baitap`.`comment` 
ADD INDEX `fk_comment_1_idx` (`user_id` ASC);
;
ALTER TABLE `baitap`.`comment` 
ADD CONSTRAINT `fk_comment_1`
  FOREIGN KEY (`user_id`)
  REFERENCES `baitap`.`user` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `baitap`.`blog` 
ADD INDEX `fk_blog_1_idx` (`user_id` ASC),
ADD INDEX `fk_blog_2_idx` (`category_id` ASC);
;
ALTER TABLE `baitap`.`blog` 
ADD CONSTRAINT `fk_blog_1`
  FOREIGN KEY (`user_id`)
  REFERENCES `baitap`.`user` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
ADD CONSTRAINT `fk_blog_2`
  FOREIGN KEY (`category_id`)
  REFERENCES `baitap`.`category` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `baitap`.`news` 
ADD INDEX `fk_news_1_idx` (`catelogy_id` ASC);
;
ALTER TABLE `baitap`.`news` 
ADD CONSTRAINT `fk_news_1`
  FOREIGN KEY (`catelogy_id`)
  REFERENCES `baitap`.`category` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
ALTER TABLE `baitap`.`follow` 
ADD INDEX `fk_follow_2_idx` (`to_user_id` ASC);
;
ALTER TABLE `baitap`.`follow` 
ADD CONSTRAINT `fk_follow_2`
  FOREIGN KEY (`to_user_id`)
  REFERENCES `baitap`.`user` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;



